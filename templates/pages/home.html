{% extends "base.html" %}

{% block title %}Home · Developer Portfolio{% endblock %}

{% block content %}
<section class="grid gap-10 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center">
    <div class="space-y-6">
        <p class="text-xs uppercase tracking-[0.2em] text-gray-400">Software Engineer · Portfolio</p>
        <h1 class="text-3xl font-semibold tracking-tight text-white sm:text-4xl md:text-5xl">
            {{ hero.headline|default:"Crafting clean experiences in code & design." }}
        </h1>
        <p class="text-base leading-relaxed text-gray-300 sm:text-lg">
            {{ hero.subheadline|default:"Full-stack Django engineer focused on modern, minimal interfaces and reliable backend architecture." }}
        </p>
        {% if hero and hero.intro_rich_text %}
            <div class="prose prose-invert max-w-none text-sm text-gray-300">
                {{ hero.intro_rich_text|safe }}
            </div>
        {% endif %}

        <div class="flex flex-wrap gap-3 pt-2">
            <a href="{% url 'projects:list' %}"
               class="inline-flex items-center gap-2 rounded-full border border-white bg-white px-4 py-2 text-xs font-medium tracking-wide text-black transition hover:-translate-y-0.5 hover:shadow-lg hover:shadow-white/10">
                <span>View projects</span>
                <span aria-hidden="true">↗</span>
            </a>
            <a href="{% url 'blog:list' %}"
               class="inline-flex items-center gap-2 rounded-full border border-neutral-700 px-4 py-2 text-xs font-medium tracking-wide text-gray-200 transition hover:border-gray-400 hover:bg-neutral-900">
                <span>Read the blog</span>
            </a>
        </div>
    </div>

    <div class="relative mt-4 lg:mt-0">
        <div class="pointer-events-none absolute -inset-6 rounded-3xl bg-gradient-to-br from-white/10 via-transparent to-white/5 blur-2xl"></div>
        <div class="relative rounded-3xl border border-neutral-800 bg-gradient-to-b from-neutral-900/80 to-black/80 p-5 shadow-xl shadow-black/40">
            <div class="flex items-center justify-between gap-4">
                <div>
                    <p class="text-xs font-medium uppercase tracking-[0.2em] text-gray-400">Stack</p>
                    <p class="mt-1 text-sm text-gray-100">Python · Go · Gin · Django · FastAPI </p>
                </div>
                <div class="flex gap-2 text-[10px] font-medium text-gray-300">
                    <span class="rounded-full bg-emerald-500/15 px-2 py-1 text-emerald-300">Available for work</span>
                </div>
            </div>
            <dl class="mt-5 grid grid-cols-3 gap-4 text-xs text-gray-300">
                <div class="space-y-1">
                    <dt class="text-[0.68rem] uppercase tracking-[0.16em] text-gray-500">Experience</dt>
                    <dd class="text-sm text-white">2+ yrs</dd>
                </div>
                <div class="space-y-1">
                    <dt class="text-[0.68rem] uppercase tracking-[0.16em] text-gray-500">Focus</dt>
                    <dd class="text-sm text-white">Software engineering</dd>
                </div>
                <div class="space-y-1">
                    <dt class="text-[0.68rem] uppercase tracking-[0.16em] text-gray-500">Location</dt>
                    <dd class="text-sm text-white">Remote / Hybrid</dd>
                </div>
            </dl>
        </div>
    </div>
</section>

<section class="mt-14 space-y-6">
    <div class="flex items-end justify-between gap-4">
        <div>
            <h2 class="text-sm font-medium uppercase tracking-[0.2em] text-gray-400">Latest writing</h2>
            <p class="mt-1 text-lg font-medium text-gray-100">Blog posts</p>
        </div>
        <a href="{% url 'blog:list' %}" class="hidden text-xs font-medium text-gray-300 underline-offset-4 hover:text-white hover:underline sm:inline">
            View all
        </a>
    </div>

    {% if latest_posts %}
        <div class="grid gap-6 md:grid-cols-3">
            {% for post in latest_posts %}
                <article class="group flex flex-col overflow-hidden rounded-2xl border border-neutral-800 bg-neutral-950/60 p-4 transition hover:-translate-y-1 hover:border-gray-500 hover:bg-neutral-900/70 hover:shadow-xl hover:shadow-black/40">
                    <div class="relative mb-4 overflow-hidden rounded-xl bg-neutral-900">
                        {% if post.hero_image %}
                            <img src="{{ post.hero_image.url }}"
                                 alt="{{ post.title }}"
                                 class="h-40 w-full object-cover transition duration-500 group-hover:scale-105">
                        {% endif %}
                    </div>
                    <p class="text-[0.68rem] uppercase tracking-[0.16em] text-gray-500">
                        {{ post.created_at|date:"M j, Y" }}
                    </p>
                    <h3 class="mt-2 text-sm font-semibold text-gray-100 group-hover:text-white">
                        <a href="{% url 'blog:detail' slug=post.slug %}" class="inline-flex items-baseline gap-1 hover:underline underline-offset-4">
                            {{ post.title|safe }}
                        </a>
                    </h3>
                    {% if post.excerpt %}
                        <p class="mt-2 line-clamp-3 text-xs leading-relaxed text-gray-400">
                            {{ post.excerpt|safe}}
                        </p>
                    {% endif %}
                </article>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-sm text-gray-400">No posts yet — create your first article in the Django admin.</p>
    {% endif %}
</section>
<style>
    #snow-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
    }

    .snowflake {
        position: absolute;
        top: -10px;
        color: rgb(130, 232, 248);
        user-select: none;
        cursor: default;
        filter: blur(1px);
        opacity: 0.8;
        animation-name: fall;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
    }

    @keyframes fall {
        0% {
            transform: translateY(0) rotate(0deg);
        }
        100% {
            transform: translateY(100vh) rotate(360deg);
        }
    }
</style>
<div id="snow-container"></div>

<script>
    function createSnowflake() {
        const container = document.getElementById('snow-container');
        if (!container) return;

        const snowflake = document.createElement('div');

        // Qor parchalari har xil shaklda bo'lishi uchun
        const shapes = ['❅', '❄'];
        snowflake.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];

        snowflake.classList.add('snowflake');

        // Tasodifiy joylashuv va o'lcham
        const startLeft = Math.random() * 100;
        const size = (Math.random() * 10 + 10) + 'px';
        const duration = (Math.random() * 5 + 5) + 's';
        const delay = Math.random() * 5 + 's';

        snowflake.style.left = startLeft + 'vw';
        snowflake.style.fontSize = size;
        snowflake.style.animationDuration = duration;
        snowflake.style.animationDelay = delay;
        snowflake.style.opacity = Math.random();

        container.appendChild(snowflake);

        // Ekrandan chiqib ketgandan keyin o'chirib tashlash
        setTimeout(() => {
            snowflake.remove();
        }, (parseFloat(duration) + parseFloat(delay)) * 1000);
    }

    // Qor yog'ish tezligi (har 200ms da bitta yangi qor parchasi)
    setInterval(createSnowflake, 70);
</script>
{% endblock %}


